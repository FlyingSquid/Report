\section{User Manual}

\subsection{Apache Traffic Server}

To run barebones, non-augmented version of ATS, run the following commands:

\begin{enumerate}

\item Change into the setup directory and execute the setup script.

\begin{lstlisting} [language=bash] 
cd $(FLYING_SQUID_ROOT_DIR)/scripts/setup
sudo ./setup.sh
\end{lstlisting}

\item 

Change into the traffic server directory and start the Apache Traffic Server.

\begin{lstlisting} [language=bash] 
cd $(FLYING_SQUID_ROOT_DIR)/trafficserver
make
sudo make install
sudo /opt/ts/bin/trafficserver stop
sudo /opt/ts/bin/trafficserver start
\end{lstlisting}

\item Make some changes to the ATS proxy configurations file.

\begin{lstlisting} [language=bash] 
cd /opt/ts/etc/trafficserver
\end{lstlisting}

Open the \verb|records.config| file and replace the following lines:

\verb|CONFIG proxy.config.reverse_proxy_enabled INT 1|
\verb|CONFIG proxy.config.url_remap.remap_required INT 1|
\verb|CONFIG proxy.config.http.cache.http INT 0|

With the following lines:

\verb|CONFIG proxy.config.reverse_proxy_enabled INT 0|
\verb|CONFIG proxy.config.url_remap.remap_required INT 0|
\verb|CONFIG proxy.config.http.cache.http INT 1|

\item Test the proxy with the following command:

\begin{lstlisting} [language=bash] 
curl â€”-proxy http://127.0.0.1:8080 -o /dev/null http://i.imgur.com/A2FUg9g.png
\end{lstlisting}

\item To view the logging, execute the following command:

\begin{lstlisting} [language=bash] 
/opt/ts/bin/traffic_logcat -f /opt/ts/var/log/trafficserver/squid.blog
\end{lstlisting}

\end{enumerate}

\subsection{ATS with Cloud Caching}



\subsection{Value-Based Caching Integration}

To run Flying Squid, run the following commands in the following order:

\begin{enumerate}

\item 

\begin{lstlisting} [language=bash] 
sudo /opt/ts/bin/trafficserver start
\end{lstlisting}

ATS will be running on port 8080.

\item 

Set Google chrome or Mozilla Firefox to point to the port that the TCP Proxy Client (Browser's Interfacing Layer) will run on. 

\item 

Start up the TCP Proxy Server (ATS's Interfacing Layer) in another terminal:

\begin{lstlisting} [language=bash] 
cd $(RABIN_FINGERPRINT_DIR)/Integration/tcpproxy
tcpproxy_server <local host ip> <tcpproxy_server port> <local host ip> 8080
\end{lstlisting}

\item

Start up the TCP Proxy Client (Browser's Interfacing Layer) in another terminal:

\begin{lstlisting} [language=bash] 
cd $(RABIN_FINGERPRINT_DIR)/Integration/tcpclient.
tcpproxy_client <local host ip> <tcpproxy_client port> <local host ip> <tcpproxy_server port>
\end{lstlisting}

\item

Open the browser that is pointing to the TCP Proxy Client and make request to a website, e.g. http://www.cs.tufts.edu.

\end{enumerate}

\subsection{Rabin Fingerprinting Demo}

\begin{enumerate}

\item 

Start up the Rabin Fingerprinting Server:

\begin{lstlisting} [language=bash] 
cd $(RABIN_FINGERPRINT_DIR)/Server
./rabinserver <Rabin Server port> ../Files/HTML/CSWebpage.html ../Files/HTML/CSWebpageWithoutHead.html
\end{lstlisting}

\item Start up the Rabin Fingerprinting Client in another terminal:

\begin{lstlisting} [language=bash] 
cd $(RABIN_FINGERPRINT_DIR)/Client
./rabinclient localhost <Rabin Server port> test.html
\end{lstlisting}

\end{enumerate}

